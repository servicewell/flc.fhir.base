{
    "resourceType": "Patient",
    "id": "{{ msg.PatientId  | to_json_string | generate_uuid  }}",
    "identifier": [
        {
            "use": "usual",
            "type": {
                "coding": [
                    {
                        "system": "http://terminology.hl7.org/CodeSystem/v2-0203",
                        "code": "MR"
                    }
                ]
            },
            "system": "urn:oid:2.16.840.1.113883.19.5",
            "value": "{{ msg.MRN }}"
        },
        {
            "system": "http://fhir.purified.link/example/identifierSystem/ehr-source-system-dev",
            "value": "{{ msg.PatientId }}"
        },

    ],
    "active": true,
    "name": [
        {
            "family": "{{ msg.LastName }}",
            "given": [
                "{{ msg.FirstName }}"
            ]
        }
    ],
    "telecom": [
        {% comment -%} use "[]" to access value if the key contains spaces or other special characters {% endcomment -%}
        {% for p in msg["Phone Number"] -%}
        {
            "system": "phone",
            "value": "{{ p }}",
            },
        {% endfor -%}
    ],
    "gender": "{{ msg.Gender | get_property: 'CodeSystem/administrativegender', 'code' -}}",
    "birthDate": "{{ msg.DOB | add_hyphens_date }}",
    "deceasedDateTime": "{{ msg.TimeOfDeath }}"
}